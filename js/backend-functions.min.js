$j(document).ready(function(){$j(".qtranxs-translatable").on("keyup",function(){bookacti_update_qtx_field(this)});$j(".bookacti-tabs").tabs();$j(".bookacti-show-hide-advanced-options").on("click",function(a){bookacti_show_hide_advanced_options($j(this))});$j("body").on("change",".bookacti-multiple-select-container .bookacti-multiple-select",function(){bookacti_switch_select_to_multiple(this)});bookacti_init_tooltip();$j("#bookacti-dismiss-5stars-rating").on("click",function(){bookacti_dismiss_5stars_rating_notice()});$j(".bookacti-list-table-go-to-page-form").on("submit",function(c){c.preventDefault();var b=$j(this).find(".current-page").val();var a=$j(this).attr("action").replace("paged=%d","paged="+b);window.location.replace(a)});bookacti_select2_init();$j(".bookacti-backend-dialog").dialog({autoOpen:false,open:function(){if($j.ui&&$j.ui.dialog&&!$j.ui.dialog.prototype._allowInteractionRemapped&&$j(this).closest(".ui-dialog").length){if($j.ui.dialog.prototype._allowInteraction){$j.ui.dialog.prototype._allowInteraction=function(a){if($j(a.target).closest(".select2-drop").length){return true}if(typeof ui_dialog_interaction==="undefined"){return true}return ui_dialog_interaction.apply(this,arguments)};$j.ui.dialog.prototype._allowInteractionRemapped=true}else{$j.error("You must upgrade jQuery UI or else.")}}},_allowInteraction:function(a){return !((!$j(a.target).is(".select2-input"))||this._super(a))}})});function bookacti_show_hide_advanced_options(a){a.closest("form").find(".bookacti-hidden-field").toggle();a.toggleClass("bookacti-show-advanced-options bookacti-hide-advanced-options");if(a.hasClass("bookacti-show-advanced-options")){a.html(a.data("show-title"))}else{if(a.hasClass("bookacti-hide-advanced-options")){a.html(a.data("hide-title"))}}}function bookacti_init_add_and_remove_items(){$j(".bookacti-items-container").on("click",".bookacti-add-items",function(d){var c=$j(this).parents(".bookacti-items-container");var b=c.find(".bookacti-add-new-items-select-box").is("[multiple]");var f=c.find(".bookacti-add-new-items-select-box").val();var a=f;if(!b){a=[f]}$j.each(a,function(g,e){c.find('.bookacti-add-new-items-select-box option[value="'+e+'"]').clone().appendTo(c.find(".bookacti-items-select-box"));c.find('.bookacti-add-new-items-select-box option[value="'+e+'"]').hide().attr("disabled",true);c.find(".bookacti-add-new-items-select-box").val(c.find(".bookacti-add-new-items-select-box option:enabled:first").val())})});$j(".bookacti-items-container").on("click",".bookacti-remove-items",function(g){var d=$j(this).parents(".bookacti-items-container");var c=d.data("type");var f="";if(c==="users"){f=bookacti_localized.current_user_id}else{if(c==="templates"){f=bookacti.selected_template}}var b=d.find(".bookacti-items-select-box").is("[multiple]");var h=d.find(".bookacti-items-select-box").val();var a=h;if(!b){a=[h]}$j.each(a,function(j,e){if(e!=f){d.find('.bookacti-items-select-box option[value="'+e+'"]').remove();d.find('.bookacti-add-new-items-select-box option[value="'+e+'"]').show().attr("disabled",false);d.find(".bookacti-add-new-items-select-box").val(e)}})})}function bookacti_empty_all_dialog_forms(a){a=typeof a==="undefined"||!a?".bookacti-backend-dialog ":a+" ";$j(a+".bookacti-form-error").remove();$j(a+'input[type="hidden"]:not([name^="nonce"]):not([name="_wp_http_referer"]):not([name="qtranslate-edit-language"]):not(.bookacti-onoffswitch-hidden-input)').val("");$j(a+'input[type="text"]').val("");$j(a+'input[type="email"]').val("");$j(a+'input[type="password"]').val("");$j(a+'input[type="tel"]').val("");$j(a+'input[type="number"]').val("");$j(a+'input[type="date"]').val("");$j(a+'input[type="time"]').val("");$j(a+"textarea").val("");$j(a+'input[type="color"]').val("#3a87ad");$j(a+'input[type="checkbox"]').prop("checked",false);$j(a+'input[type="radio"]').prop("checked",false);$j(a+"option").prop("selected",false);$j(a+".exception").remove();$j(a+"select.bookacti-add-new-items-select-box option").show().attr("disabled",false);$j(a+"select.bookacti-items-select-box option").remove();if($j(a+'input[type="file"]').length){$j(a+'input[type="file"]').each(function(){$j(this).wrap("<form>").closest("form").get(0).reset();$j(this).unwrap()})}if(typeof tinyMCE!=="undefined"){if(tinyMCE){$j(a+"textarea.wp-editor-area").each(function(){var b=$j(this).attr("id");if(tinyMCE.get(b)){tinyMCE.get(b).setContent("")}})}}if($j(a+".bookacti-multiple-select").length){$j(a+".bookacti-multiple-select").each(function(){bookacti_switch_select_to_multiple(this)})}$j("body").trigger("bookacti_empty_all_dialogs_forms",[a])}function bookacti_fill_fields_from_array(a,c,b){c=c||"";b=typeof b==="undefined"||!b?"":b+" ";$j.each(a,function(d,g){var f=c?c+"["+d+"]":d;if($j.isPlainObject(g)){bookacti_fill_fields_from_array(g,f,b);return true}if($j(b+'select[name="'+f+'[]"]').length&&(!$j.isArray(g)||($j.isArray(g)&&g.length<=1))){var e=$j(b+'select[name="'+f+'[]"]').attr("id");if($j(b+'input.bookacti-multiple-select[data-select-id="'+e+'"]').length){$j(b+'input.bookacti-multiple-select[data-select-id="'+e+'"]').prop("checked",false);bookacti_switch_select_to_multiple(b+'input.bookacti-multiple-select[data-select-id="'+e+'"]');$j(b+'select[name="'+f+'"] option').prop("selected",false)}}if($j(b+'select[name="'+f+'"]').length&&$j.isArray(g)&&g.length>1){if(g.length===1){g=g[0]}else{var e=$j(b+'select[name="'+f+'"]').attr("id");if($j(b+'input.bookacti-multiple-select[data-select-id="'+e+'"]').length){$j(b+'input.bookacti-multiple-select[data-select-id="'+e+'"]').prop("checked",true);bookacti_switch_select_to_multiple(b+'input.bookacti-multiple-select[data-select-id="'+e+'"]');$j(b+'select[name="'+f+'[]"] option').prop("selected",false)}}}if($j(b+'input[type="checkbox"][name="'+f+'[]"]').length||$j(b+'input[type="checkbox"][name="'+f+'"]').length){if($j.isArray(g)){$j(b+'input[type="checkbox"][name="'+f+'[]"]').prop("checked",false);$j.each(g,function(k,j){$j(b+'input[type="checkbox"][name="'+f+'[]"][value="'+j+'"]').prop("checked",true)})}else{if(g==1){$j(b+'input[type="checkbox"][name="'+f+'"]').prop("checked",true)}else{$j(b+'input[type="checkbox"][name="'+f+'"]').prop("checked",false)}}}else{if($j(b+'input[name="'+f+'"]').is(":radio")){$j(b+'input[name="'+f+'"][value="'+g+'"]').prop("checked",true)}else{if($j(b+'select[name="'+f+'"]').length){$j(b+'select[name="'+f+'"] option[value="'+g+'"]').prop("selected",true);$j(b+'select[name="'+f+'"]').trigger("change")}else{if($j(b+'select[name="'+f+'[]"]').length){$j.each(g,function(j,k){$j(b+'select[name="'+f+'[]"] option[value="'+k+'"]').prop("selected",true)});$j(b+'select[name="'+f+'[]"]').trigger("change")}else{if($j(b+'input[name="'+f+'"]').attr("type")==="file"){return true}if($j(b+'input[name="'+f+'"]').attr("type")==="time"&&g==="24:00"){g="00:00"}$j(b+'input[name="'+f+'"]').val(g);$j(b+'textarea[name="'+f+'"]').val(g);if(typeof tinyMCE!=="undefined"){if(tinyMCE&&$j(b+'textarea[name="'+f+'"]').hasClass("wp-editor-area")){var h=$j(b+'textarea[name="'+f+'"]').attr("id");if(tinyMCE.get(h)){tinyMCE.get(h).setContent(g)}}}}}}}})}function bookacti_switch_select_to_multiple(e){if(!$j(e).length){return}var f=$j(e).data("select-id");var d=$j("select#"+f).attr("name");var a=$j(e).is(":checked");var b=$j("select#"+f).val();$j("select#"+f).prop("multiple",a);$j("select#"+f+' option[value="all"]').prop("disabled",a);$j("select#"+f+' option[value="none"]').prop("disabled",a);$j("select#"+f+' option[value="parent"]').prop("disabled",a);$j("select#"+f+' option[value="site"]').prop("disabled",a);$j("select#"+f+" option:disabled:selected").prop("selected",false);if(a&&d.indexOf("[]")<0){$j("select#"+f).attr("name",d+"[]");$j(e).closest(".bookacti-multiple-select-container").find("label span.dashicons").removeClass("dashicons-plus").addClass("dashicons-minus")}else{$j("select#"+f).attr("name",d.replace("[]",""));$j(e).closest(".bookacti-multiple-select-container").find("label span.dashicons").removeClass("dashicons-minus").addClass("dashicons-plus")}if(!a){var c=$j("select#"+f+" option:not(:disabled):first").length?$j("select#"+f+" option:not(:disabled):first").val():"";if(b){if(!$j.isArray(b)){b=[b]}$j.each(b,function(g,j){var h=$j("select#"+f+' option[value="'+j+'"]');if(h.length){if(!h.is(":disabled")){c=h.attr("value");return false}}})}$j("select#"+f).val(c).trigger("change")}}function bookacti_show_hide_template_related_options(b,a){var c=[];if($j.isNumeric(b)){b=[b]}a.prop("disabled",false);a.removeClass("bookacti-hide-fields");a.each(function(){var f=$j(this);var e=f.data("bookacti-show-if-templates").toString();if(e.indexOf(",")>=0){e=e.split(",")}else{e=[e]}var d=true;$j.each(b,function(h,g){if($j.inArray(g.toString(),e)>=0){d=false}});if(d){if(f.is(":selected")){c.push(f)}f.addClass("bookacti-hide-fields");f.prop("disabled",true)}});$j.each(c,function(d,e){e.removeAttr("selected");e.siblings("option:not(.bookacti-hide-fields):not(:disabled):first").prop("selected",true)})}function bookacti_update_qtx_field(b){if(typeof qTranslateConfig!=="undefined"){var a=qTranslateConfig.js.get_qtx();var c=a.getActiveLanguage();var d=$j(b).attr("name");if(c!==undefined){$j('input[name="qtranslate-fields['+d+"]["+c+']"]').val($j(b).val())}}}function bookacti_refresh_qtx_field(c){if(typeof qTranslateConfig!=="undefined"){var a=qTranslateConfig.js.get_qtx();$j(c).removeClass("qtranxs-translatable");var b=a.refreshContentHook(c);$j(c).addClass("qtranxs-translatable");if(typeof tinyMCE!=="undefined"){if(tinyMCE&&$j("#"+c.id).hasClass("wp-editor-area")){if(tinyMCE.get(c.id)){b.mce=tinyMCE.get(c.id);b.mce.setContent(b.contentField.value,{format:"html"})}}}}}function bookacti_dismiss_5stars_rating_notice(){$j(".bookacti-5stars-rating-notice").remove();$j.ajax({url:ajaxurl,type:"POST",data:{action:"bookactiDismiss5StarsRatingNotice",nonce:bookacti_localized.nonce_dismiss_5stars_rating_notice},dataType:"json",success:function(b){if(b.status==="failed"){var a=bookacti_localized.error_update_settings;if(b.error==="not_allowed"){a+="\n"+bookacti_localized.error_not_allowed}console.log(a);console.log(b)}},error:function(a){console.log(a)},complete:function(){}})};