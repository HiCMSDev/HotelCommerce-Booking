
function bookacti_init_booking_system_dialogs(){$j(".bookacti-booking-system-dialog").dialog({modal:true,autoOpen:false,minHeight:300,minWidth:400,resize:"auto",show:true,hide:true,closeText:"&#10006;",close:function(){}});$j("#bookacti-choose-group-of-events-dialog").dialog({title:bookacti_localized.dialog_choose_group_of_events_title});$j("#bookacti-groups-of-events-list").on("bookacti_group_of_events_preview",'input[name="group_of_events"]',function(f,d){var c=$j(this).val();var b=$j("#bookacti-groups-of-events-list").data("booking-system-id");var a=$j("#"+b);$j('.bookacti-group-of-events-option[data-group-id!="'+c+'"]').data("show-events",0).attr("data-show-events",0);$j('.bookacti-group-of-events-list[data-group-id!="'+c+'"]').hide(200);$j('.bookacti-group-of-events-option[data-group-id="'+c+'"]').data("show-events",1).attr("data-show-events",1);$j('.bookacti-group-of-events-list[data-group-id="'+c+'"]').show(200);bookacti_unpick_all_events(a);bookacti_pick_events_of_group(a,c,d)})}function bookacti_dialog_choose_group_of_events(f,b,p){var i=f.attr("id");var c=i==="bookacti-booking-system-bookings-page"?"booking_page":"frontend";$j("#bookacti-groups-of-events-list").data("booking-system-id",i);$j("#bookacti-groups-of-events-list").empty();if(bookacti.booking_system[i]["groups_single_events"]){var o="single";var l=$j("<div />",{});var g=$j("<div />",{"class":"bookacti-group-of-events-option","data-group-id":o,"data-show-events":0});var k=$j("<input />",{id:"bookacti-group-of-events-"+o,type:"radio",name:"group_of_events",value:o});var r="";if(c==="booking_page"){var a=bookacti_get_bookings_number_for_a_single_grouped_event(f,p,b);var n=a>1?bookacti_localized.bookings:bookacti_localized.booking;r=a+" "+n}else{var j=bookacti_get_event_availability(f,p);var m=j>1?bookacti_localized.avails:bookacti_localized.avail;r=j+" "+m}var h=$j("<label />",{html:bookacti_localized.single_event+' <span class="bookacti-group-availability" >('+r+")</span>","for":"bookacti-group-of-events-"+o});var d=$j("<ul />",{"class":"bookacti-group-of-events-list","data-group-id":o});var q=bookacti_format_event_duration(p.start,p.end);var e=$j("<li />",{html:'<span class="bookacti-booking-event-title" >'+p.title+'</span><span class="bookacti-booking-event-title-separator" > - </span>'+q});g.append(k);g.append(h);l.append(g);d.append(e);l.append(d);$j("#bookacti-groups-of-events-list").append(l)}$j.each(b,function(y,D){D=parseInt(D);if(typeof bookacti.booking_system[i]["groups_events"][D]!=="undefined"){var w=bookacti_get_group_availability(f,bookacti.booking_system[i]["groups_events"][D]);var t=$j("<div />",{});var x=$j("<div />",{"class":"bookacti-group-of-events-option","data-group-id":D,"data-show-events":0});var v=$j("<input />",{id:"bookacti-group-of-events-"+D,type:"radio",name:"group_of_events",disabled:c!=="booking_page"&&w<=0,value:D});var C="";if(c==="booking_page"){var E=0;$j.each(bookacti.booking_system[i]["groups_events"][D],function(G,F){if(p.id==F.id&&p.start.format("YYYY-MM-DD HH:mm:ss")===F.start&&p.end.format("YYYY-MM-DD HH:mm:ss")===F.end){E=F.group_bookings}});var u=E>1?bookacti_localized.bookings:bookacti_localized.booking;C=E+" "+u}else{var A=w>1?bookacti_localized.avails:bookacti_localized.avail;C=w+" "+A}var z={html:bookacti.booking_system[i]["groups_data"][D]["title"]+' <span class="bookacti-group-availability" >('+C+")</span>","for":"bookacti-group-of-events-"+D};f.trigger("bookacti_choose_group_dialog_group_label",[z,D,p]);var B=$j("<label />",z);var s=$j("<ul />",{"class":"bookacti-group-of-events-list","data-group-id":D});$j.each(bookacti.booking_system[i]["groups_events"][D],function(I,L){var G=L.start.substr(0,10)===L.end.substr(0,10);var K=moment(L.start).locale(bookacti_localized.current_lang_code);var H=moment(L.end).locale(bookacti_localized.current_lang_code);var F=K.format(bookacti_localized.date_format)+" &rarr; "+H.format(bookacti_localized.date_format);if(G){F=K.format(bookacti_localized.date_format)+" &rarr; "+H.format("LT")}var J=$j("<li />",{html:L.title+" - "+F});s.append(J)});x.append(v);x.append(B);t.append(x);t.append(s);$j("#bookacti-groups-of-events-list").append(t)}});$j('#bookacti-groups-of-events-list input[name="group_of_events"]').on("change",function(){$j(this).trigger("bookacti_group_of_events_preview",[p])});$j('#bookacti-groups-of-events-list input[name="group_of_events"]:not([disabled]):first').prop("checked",true).trigger("change");$j("#bookacti-choose-group-of-events-dialog").dialog("open");$j("#bookacti-choose-group-of-events-dialog").dialog({close:function(){var s=$j('#bookacti-groups-of-events-list input[type="radio"]:checked').val();if(typeof s==="undefined"){bookacti_unpick_all_events(f)}}});$j("#bookacti-choose-group-of-events-dialog").dialog("option","buttons",[{text:bookacti_localized.dialog_button_ok,click:function(){var s=$j('#bookacti-groups-of-events-list input[type="radio"]:checked').val();bookacti_unpick_all_events(f);bookacti_pick_events_of_group(f,s,p);f.trigger("bookacti_group_of_events_chosen",[s,p]);$j(this).dialog("close")}}])};