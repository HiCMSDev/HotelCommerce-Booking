$j(document).ready(function(){var b=$j("#bookacti-booking-system-bookings-page");var a=b.attr("id");if(!b.length){return false}bookacti_init_booking_filters_actions();b.on("bookacti_event_render",function(i,c,g,k){g=g||undefined;var o=bookacti.booking_system[a]["events_data"][c.id]["activity_id"];var j=$j("#bookacti-booking-filter-activities").val()?$j("#bookacti-booking-filter-activities").val():[];if(j.length&&$j.inArray(o,j)<0){c.render=0}if(typeof g!=="undefined"){if(g.hasClass("bookacti-event-unavailable")){g.removeClass("bookacti-event-unavailable")}g.find(".bookacti-availability-container").remove();var d=parseInt(c.bookings);var n=d>0?1:0;var f=parseInt(bookacti.booking_system[a]["events_data"][c.id]["availability"]);var l=bookacti_get_event_availability(b,c);var q=f===0?"bookacti-no-availability":"";var p=n?"bookacti-booked":"bookacti-not-booked";var m=l<=0?"bookacti-full":"";var h='<div class="bookacti-availability-container" ><span class="bookacti-available-places '+q+" "+p+" "+m+'" ><span class="bookacti-active-bookings-number">'+d+'</span> / <span class="bookacti-total-places-number">'+f+"</span></span></div>";g.append(h)}});b.on("bookacti_after_calendar_set_up",function(){var d=b.find(".bookacti-calendar");var c=bookacti.booking_system["bookacti-booking-system-bookings-page"]["default_inputs"];if(!$j.isEmptyObject(c)){if(c.group_id==0){c.group_id="single"}b.siblings(".bookacti-booking-system-inputs").find('input[name="bookacti_group_id"]').val(c.group_id);b.siblings(".bookacti-booking-system-inputs").find('input[name="bookacti_event_id"]').val(c.id);b.siblings(".bookacti-booking-system-inputs").find('input[name="bookacti_event_start"]').val(c.start);b.siblings(".bookacti-booking-system-inputs").find('input[name="bookacti_event_end"]').val(c.end);delete bookacti.booking_system["bookacti-booking-system-bookings-page"]["default_inputs"]}var e=bookacti.booking_system["bookacti-booking-system-bookings-page"]["picked_events"];if(!$j.isEmptyObject(bookacti.booking_system["bookacti-booking-system-bookings-page"]["picked_events"])){d.fullCalendar("gotoDate",moment(e[0]["start"]))}bookacti_refresh_calendar_according_to_date_filter(d)});$j("#bookacti-bookings-list").on("bookacti_booking_list_filled bookacti_grouped_bookings_displayed",function(){bookacti_init_tooltip()});$j("body").on("bookacti_booking_rescheduled",function(){var c=$j("#bookacti-booking-system-bookings-page");bookacti_booking_method_refetch_events(c);bookacti_refresh_booking_numbers(c)});$j("body").on("bookacti_booking_state_changed",function(k,c,h,g,f,j,i){bookacti_init_tooltip();if(!i){return false}var d=$j("#bookacti-booking-system-bookings-page");bookacti_refresh_booking_numbers(d)});$j("body").on("bookacti_booking_refunded",function(){bookacti_init_tooltip();var c=$j("#bookacti-booking-system-bookings-page");bookacti_refresh_booking_numbers(c)})});